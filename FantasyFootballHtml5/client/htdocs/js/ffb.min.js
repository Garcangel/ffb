(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments)).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;
    return { next: verb(0), "throw": verb(1), "return": verb(2) };
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var debug_1 = require("../../../../common/util/debug");
var Preloader = (function () {
    function Preloader(progressCallback) {
        this.images = [];
        this.loadedCount = 0;
        if (progressCallback) {
            this.progressCallback = progressCallback;
        }
    }
    Preloader.prototype.registerImage = function (imagePath, imageFile) {
        this.images.push(imagePath + "/" + imageFile);
    };
    Preloader.prototype.preload = function (parallel) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.loadedCount = 0;
                return [2 /*return*/, new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {
                        var list, _i, _a, imagePath;
                        return __generator(this, function (_b) {
                            switch (_b.label) {
                                case 0:
                                    list = [];
                                    _i = 0, _a = this.images;
                                    _b.label = 1;
                                case 1:
                                    if (!(_i < _a.length))
                                        return [3 /*break*/, 5];
                                    imagePath = _a[_i];
                                    if (!parallel)
                                        return [3 /*break*/, 2];
                                    list.push(this.loadImage(imagePath));
                                    return [3 /*break*/, 4];
                                case 2: return [4 /*yield*/, this.loadImage(imagePath)];
                                case 3:
                                    _b.sent();
                                    _b.label = 4;
                                case 4:
                                    _i++;
                                    return [3 /*break*/, 1];
                                case 5: return [4 /*yield*/, Promise.all(list)];
                                case 6:
                                    _b.sent();
                                    resolve();
                                    return [2 /*return*/];
                            }
                        });
                    }); })];
            });
        });
    };
    Preloader.prototype.loadImage = function (imagePath) {
        var _this = this;
        return new Promise(function (resolve) {
            debug_1.Debug.log(debug_1.DebugLevel.Debug, "Loading Image: " + imagePath);
            var image = new Image();
            image.onload = function () {
                _this.loadedCount++;
                if (_this.progressCallback) {
                    _this.progressCallback(_this.loadedCount, _this.images.length);
                }
                debug_1.Debug.log(debug_1.DebugLevel.Debug, "Loaded Image: " + imagePath);
                resolve();
            };
            image.src = imagePath;
        });
    };
    return Preloader;
}());
exports.Preloader = Preloader;
},{"../../../../common/util/debug":5}],2:[function(require,module,exports){
/* Sound Engine implementation
 *
 * Dependencies:
 *  - Howler.js - Underlying audio library.
 *  - es6-shim - Provides Promises for browsers not yet implementing es6.
 *
 */
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments)).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;
    return { next: verb(0), "throw": verb(1), "return": verb(2) };
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var debug_1 = require("../../../../common/util/debug");
var util_1 = require("../../../../common/util/util");
var SoundEngine = (function () {
    function SoundEngine(progressCallback) {
        this.sounds = {};
        this.defaultOptions = {
            allowOverlap: true,
            volume: 1.0,
        };
        Howler.volume(1.0);
        if (progressCallback) {
            this.progressCallback = progressCallback;
        }
        this.loadedCount = 0;
        this.soundCount = 0;
    }
    ;
    SoundEngine.prototype.registerSound = function (path, sound, options) {
        var state = util_1.Util.extend({}, this.defaultOptions, options);
        state.path = path;
        state.playing = 0;
        state.files = [path + "/" + sound + ".webm", path + "/" + sound + ".mp3"];
        if (this.sounds[sound] === undefined) {
            this.soundCount++;
        }
        this.sounds[sound] = state;
    };
    SoundEngine.prototype.preload = function (parallel) {
        var _this = this;
        this.loadedCount = 0;
        return new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {
            var list, _a, _b, _i, sound;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        list = [];
                        _a = [];
                        for (_b in this.sounds)
                            _a.push(_b);
                        _i = 0;
                        _c.label = 1;
                    case 1:
                        if (!(_i < _a.length))
                            return [3 /*break*/, 5];
                        sound = _a[_i];
                        if (!parallel)
                            return [3 /*break*/, 2];
                        list.push(this.loadFile(sound));
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.loadFile(sound)];
                    case 3:
                        _c.sent();
                        _c.label = 4;
                    case 4:
                        _i++;
                        return [3 /*break*/, 1];
                    case 5: return [4 /*yield*/, Promise.all(list)];
                    case 6:
                        _c.sent();
                        resolve();
                        return [2 /*return*/];
                }
            });
        }); });
    };
    SoundEngine.prototype.play = function (sound, options) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            var opts, snd;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this.sounds[sound].loaded)
                            return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadFile(sound)];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        opts = util_1.Util.extend({}, this.defaultOptions, this.sounds[sound], options);
                        if (!opts.allowOverlap && opts.playing) {
                            return [2 /*return*/];
                        }
                        snd = this.sounds[sound].howl;
                        if (snd !== undefined) {
                            snd.volume(opts.volume);
                            this.sounds[sound].playing++;
                            snd.on("end", function () {
                                _this.sounds[sound].playing--;
                            });
                            snd.play();
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    SoundEngine.prototype.globalVolume = function (volume) {
        Howler.volume(volume);
    };
    SoundEngine.prototype.stop = function () {
        var _this = this;
        Howler.unload();
        util_1.Util.eachIn(this.sounds, function (sound) {
            _this.sounds[sound].howl = undefined;
            _this.sounds[sound].loaded = false;
        });
    };
    SoundEngine.prototype.loadFile = function (sound) {
        var _this = this;
        var opts = util_1.Util.extend({}, this.defaultOptions, this.sounds[sound]);
        debug_1.Debug.log(debug_1.DebugLevel.Debug, "Loading sound: " + sound);
        return new Promise(function (resolve) {
            var file = new Howl({
                onload: function () {
                    _this.sounds[sound].howl = file;
                    if (!_this.sounds[sound].loaded) {
                        _this.sounds[sound].loaded = true;
                        _this.loadedCount++;
                        if (_this.progressCallback) {
                            _this.progressCallback(_this.loadedCount, _this.soundCount);
                        }
                    }
                    debug_1.Debug.log(debug_1.DebugLevel.Debug, "Sound loaded: " + sound);
                    resolve();
                },
                src: opts.files,
                volume: opts.volume,
            });
        });
    };
    return SoundEngine;
}());
exports.SoundEngine = SoundEngine;
},{"../../../../common/util/debug":5,"../../../../common/util/util":6}],3:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments)).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;
    return { next: verb(0), "throw": verb(1), "return": verb(2) };
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var _this = this;
// tslint:disable:no-console
var preloader_1 = require("./modules/preloader");
var soundengine_1 = require("./modules/soundengine");
// tslint:disable-next-line:no-string-literal
window["preloadTest"] = function () {
    var imageProgress = 0;
    var soundProgress = 0;
    function updateTotalProgress() {
        var progress = soundProgress * 0.5 + imageProgress * 0.5;
        $("#totalprogress").width(progress + "%");
    }
    var p = new preloader_1.Preloader(function (loaded, imageCount) {
        var progress = 100 * (loaded / imageCount);
        $("#imageprogress").width(progress + "%");
        imageProgress = progress;
        updateTotalProgress();
    });
    p.registerImage("media/images/pitches/basic", "blizzard.png");
    p.registerImage("media/images/pitches/basic", "heat.png");
    p.registerImage("media/images/pitches/basic", "nice.png");
    p.registerImage("media/images/pitches/basic", "rain.png");
    p.registerImage("media/images/pitches/basic", "sunny.png");
    $("#preloadImagesSerial").on("click", function () {
        p.preload(false)
            .then(function () {
            console.log("Images loaded");
        });
    });
    $("#preloadImagesParallel").on("click", function () {
        p.preload(true)
            .then(function () {
            console.log("Images loaded");
        });
    });
    $("#preloadAllSerial").on("click", function () { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, p.preload(false)];
                case 1:
                    _a.sent();
                    return [4 /*yield*/, se.preload(false)];
                case 2:
                    _a.sent();
                    return [2 /*return*/];
            }
        });
    }); });
    $("#preloadAllParallel").on("click", function () { return __awaiter(_this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            p.preload(true);
            se.preload(true);
            return [2 /*return*/];
        });
    }); });
    var sounds = {
        Aaah: { volume: 0.1 },
        Booing: { volume: 0.1 },
        Cheering: { volume: 0.1 },
        ClapBoo: { volume: 0.1 },
        Clapping: { volume: 0.1 },
        Crickets: { volume: 0.1 },
        Giggling: { volume: 0.1 },
        Hysterical: { volume: 0.1 },
        Laughter: { volume: 0.1 },
        Oooh: { volume: 0.1 },
        Shocked: { volume: 0.1 },
        Stomping: { volume: 0.1 },
    };
    var se = new soundengine_1.SoundEngine(function (loaded, soundCount) {
        var progress = 100 * (loaded / soundCount);
        $("#soundprogress").width(progress + "%");
        soundProgress = progress;
        updateTotalProgress();
    });
    $.each(sounds, function (sound, options) {
        se.registerSound("media/sounds", sound, options);
    });
    $(".soundbutton").click(function (evt) {
        se.play($(evt.target).attr("file"));
    });
    $("#globalvolume").on("change", function (evt) {
        se.globalVolume($(evt.target).val() / 100);
    });
    $("#stopbutton").on("click", function () {
        se.stop();
    });
    $("#preloadSoundsSerial").on("click", function () {
        se.preload(false)
            .then(function () {
            console.log("Sounds loaded.");
        });
    });
    $("#preloadSoundsParallel").on("click", function () {
        se.preload(true)
            .then(function () {
            console.log("Sounds loaded.");
        });
    });
};
},{"./modules/preloader":1,"./modules/soundengine":2}],4:[function(require,module,exports){
"use strict";
// tslint:disable:no-console
var soundengine_1 = require("./modules/soundengine");
// tslint:disable-next-line:no-string-literal
window["soundTest"] = function (progressCallback) {
    var sounds = {
        Aaah: { volume: 0.1 },
        Booing: { volume: 0.1 },
        Cheering: { volume: 0.1 },
        ClapBoo: { volume: 0.1 },
        Clapping: { volume: 0.1 },
        Crickets: { volume: 0.1 },
        Giggling: { volume: 0.1 },
        Hysterical: { volume: 0.1 },
        Laughter: { volume: 0.1 },
        Oooh: { volume: 0.1 },
        Shocked: { volume: 0.1 },
        Stomping: { volume: 0.1 },
    };
    if (!progressCallback) {
        progressCallback = function (loaded, soundCount) {
            var progress = 100 * (loaded / soundCount);
            $("#soundprogress").width(progress + "%");
        };
    }
    var se = new soundengine_1.SoundEngine(progressCallback);
    $.each(sounds, function (sound, options) {
        se.registerSound("media/sounds", sound, options);
    });
    $(".soundbutton").click(function (evt) {
        se.play($(evt.target).attr("file"));
    });
    $("#globalvolume").on("change", function (evt) {
        se.globalVolume($(evt.target).val() / 100);
    });
    $("#stopbutton").on("click", function () {
        se.stop();
    });
    $("#preloadSoundsSerial").on("click", function () {
        se.preload(false)
            .then(function () {
            console.log("Sounds loaded.");
        });
    });
    $("#preloadSoundsParallel").on("click", function () {
        se.preload(true)
            .then(function () {
            console.log("Sounds loaded.");
        });
    });
};
},{"./modules/soundengine":2}],5:[function(require,module,exports){
"use strict";
// tslint:disable:no-console
var DebugLevel;
(function (DebugLevel) {
    DebugLevel[DebugLevel["Debug"] = 1] = "Debug";
    DebugLevel[DebugLevel["Info"] = 2] = "Info";
    DebugLevel[DebugLevel["Warn"] = 3] = "Warn";
    DebugLevel[DebugLevel["Error"] = 4] = "Error";
})(DebugLevel = exports.DebugLevel || (exports.DebugLevel = {}));
var Debug = (function () {
    function Debug() {
    }
    Debug.log = function (level, message) {
        console.log(DebugLevel[level] + ": " + message);
    };
    return Debug;
}());
exports.Debug = Debug;
},{}],6:[function(require,module,exports){
"use strict";
var Util = (function () {
    function Util() {
    }
    Util.extend = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        for (var i = 1; i < args.length; i++) {
            for (var key in args[i]) {
                if (args[i].hasOwnProperty(key)) {
                    args[0][key] = args[i][key];
                }
            }
        }
        return args[0];
    };
    Util.eachOf = function (list, func) {
        for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {
            var item = list_1[_i];
            func(item);
        }
    };
    Util.eachIn = function (list, func) {
        for (var item in list) {
            if (list.hasOwnProperty(item)) {
                func(item);
            }
        }
    };
    return Util;
}());
exports.Util = Util;
},{}]},{},[4,3])

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjbGllbnQvc3JjL2pzL21vZHVsZXMvcHJlbG9hZGVyLnRzIiwiY2xpZW50L3NyYy9qcy9tb2R1bGVzL3NvdW5kZW5naW5lLnRzIiwiY2xpZW50L3NyYy9qcy9wcmVsb2FkdGVzdC50cyIsImNsaWVudC9zcmMvanMvc291bmR0ZXN0LnRzIiwiY29tbW9uL3V0aWwvZGVidWcudHMiLCJjb21tb24vdXRpbC91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUEsdURBQWtFO0FBRWxFO0lBS0ksbUJBQW1CLGdCQUErRDtRQUoxRSxXQUFNLEdBQWEsRUFBRSxDQUFDO1FBSzFCLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7UUFDN0MsQ0FBQztJQUNMLENBQUM7SUFFTSxpQ0FBYSxHQUFwQixVQUFxQixTQUFpQixFQUFFLFNBQWlCO1FBQ3JELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLEdBQUcsU0FBUyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVZLDJCQUFPLEdBQXBCLFVBQXFCLFFBQWlCOzs7O2dCQUNsQyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztnQkFDckIsTUFBTSxnQkFBQyxJQUFJLE9BQU8sQ0FBTyxVQUFPLE9BQU87NEJBQy9CLElBQUksVUFDQyxTQUFTOzs7OzJDQURlLEVBQUU7aURBQ2IsSUFBSSxDQUFDLE1BQU07Ozt5Q0FBWCxDQUFBLGNBQVcsQ0FBQTs7O3lDQUN6QixRQUFROztvQ0FDUixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENB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dXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IERlYnVnLCBEZWJ1Z0xldmVsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbW1vbi91dGlsL2RlYnVnXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJlbG9hZGVyIHtcclxuICAgIHByaXZhdGUgaW1hZ2VzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBsb2FkZWRDb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBwcm9ncmVzc0NhbGxiYWNrOiAobG9hZGVkOiBudW1iZXIsIGltYWdlQ291bnQ6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvZ3Jlc3NDYWxsYmFjaz86IChsb2FkZWQ6IG51bWJlciwgaW1hZ2VDb3VudDogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRDb3VudCA9IDA7XHJcbiAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9ncmVzc0NhbGxiYWNrID0gcHJvZ3Jlc3NDYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlZ2lzdGVySW1hZ2UoaW1hZ2VQYXRoOiBzdHJpbmcsIGltYWdlRmlsZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZXMucHVzaChpbWFnZVBhdGggKyBcIi9cIiArIGltYWdlRmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHByZWxvYWQocGFyYWxsZWw6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmxvYWRlZENvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oYXN5bmMgKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgbGV0IGxpc3Q6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGltYWdlUGF0aCBvZiB0aGlzLmltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFsbGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKHRoaXMubG9hZEltYWdlKGltYWdlUGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRJbWFnZShpbWFnZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZEltYWdlKGltYWdlUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIERlYnVnLmxvZyhEZWJ1Z0xldmVsLkRlYnVnLCBcIkxvYWRpbmcgSW1hZ2U6IFwiICsgaW1hZ2VQYXRoKTtcclxuICAgICAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkQ291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzQ2FsbGJhY2sodGhpcy5sb2FkZWRDb3VudCwgdGhpcy5pbWFnZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIERlYnVnLmxvZyhEZWJ1Z0xldmVsLkRlYnVnLCBcIkxvYWRlZCBJbWFnZTogXCIgKyBpbWFnZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZVBhdGg7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLyogU291bmQgRW5naW5lIGltcGxlbWVudGF0aW9uXHJcbiAqXHJcbiAqIERlcGVuZGVuY2llczogXHJcbiAqICAtIEhvd2xlci5qcyAtIFVuZGVybHlpbmcgYXVkaW8gbGlicmFyeS5cclxuICogIC0gZXM2LXNoaW0gLSBQcm92aWRlcyBQcm9taXNlcyBmb3IgYnJvd3NlcnMgbm90IHlldCBpbXBsZW1lbnRpbmcgZXM2LlxyXG4gKlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERlYnVnLCBEZWJ1Z0xldmVsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbW1vbi91dGlsL2RlYnVnXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL3V0aWwvdXRpbFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU291bmRPcHRpb25zIHtcclxuICAgIGFsbG93T3ZlcmxhcD86IGJvb2xlYW47XHJcbiAgICB2b2x1bWU/OiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBJU291bmRTdGF0ZSBleHRlbmRzIElTb3VuZE9wdGlvbnMge1xyXG4gICAgcGxheWluZz86IG51bWJlcjtcclxuICAgIHBhdGg/OiBzdHJpbmc7XHJcbiAgICBmaWxlcz86IHN0cmluZ1tdO1xyXG4gICAgaG93bD86IEhvd2w7XHJcbiAgICBsb2FkZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU291bmRFbmdpbmUge1xyXG4gICAgcHJpdmF0ZSBwcm9ncmVzc0NhbGxiYWNrOiAobG9hZGVkOiBudW1iZXIsIHNvdW5kQ291bnQ6IG51bWJlcikgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgc291bmRDb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBsb2FkZWRDb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzb3VuZHM6IHsgW3Byb3BOYW1lOiBzdHJpbmddOiBJU291bmRTdGF0ZSB9ID0geyB9O1xyXG5cclxuICAgIHByaXZhdGUgZGVmYXVsdE9wdGlvbnM6IElTb3VuZFN0YXRlID0ge1xyXG4gICAgICAgIGFsbG93T3ZlcmxhcDogdHJ1ZSxcclxuICAgICAgICB2b2x1bWU6IDEuMCxcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByb2dyZXNzQ2FsbGJhY2s/OiAobG9hZGVkOiBudW1iZXIsIHNvdW5kQ291bnQ6IG51bWJlcikgPT4gdm9pZCkge1xyXG4gICAgICAgIEhvd2xlci52b2x1bWUoMS4wKTtcclxuICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzQ2FsbGJhY2sgPSBwcm9ncmVzc0NhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvYWRlZENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnNvdW5kQ291bnQgPSAwO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJTb3VuZChwYXRoOiBzdHJpbmcsIHNvdW5kOiBzdHJpbmcsIG9wdGlvbnM6IElTb3VuZE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICBsZXQgc3RhdGU6IElTb3VuZFN0YXRlID0gVXRpbC5leHRlbmQoeyB9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICAgICAgICBzdGF0ZS5wYXRoID0gcGF0aDtcclxuICAgICAgICBzdGF0ZS5wbGF5aW5nID0gMDtcclxuICAgICAgICBzdGF0ZS5maWxlcyA9IFtwYXRoICsgXCIvXCIgKyBzb3VuZCArIFwiLndlYm1cIiwgcGF0aCArIFwiL1wiICsgc291bmQgKyBcIi5tcDNcIl07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNvdW5kc1tzb3VuZF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNvdW5kQ291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zb3VuZHNbc291bmRdID0gc3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByZWxvYWQocGFyYWxsZWw6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmxvYWRlZENvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oYXN5bmMgKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgbGV0IGxpc3Q6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IHNvdW5kIGluIHRoaXMuc291bmRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYWxsZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2godGhpcy5sb2FkRmlsZShzb3VuZCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRGaWxlKHNvdW5kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChsaXN0KTtcclxuXHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcGxheShzb3VuZDogc3RyaW5nLCBvcHRpb25zPzogSVNvdW5kT3B0aW9ucykge1xyXG4gICAgICAgIGlmICghdGhpcy5zb3VuZHNbc291bmRdLmxvYWRlZCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRGaWxlKHNvdW5kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBvcHRzOiBJU291bmRTdGF0ZSA9IFV0aWwuZXh0ZW5kKHsgfSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgdGhpcy5zb3VuZHNbc291bmRdLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgaWYgKCFvcHRzLmFsbG93T3ZlcmxhcCAmJiBvcHRzLnBsYXlpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNuZCA9IHRoaXMuc291bmRzW3NvdW5kXS5ob3dsO1xyXG5cclxuICAgICAgICBpZiAoc25kICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc25kLnZvbHVtZShvcHRzLnZvbHVtZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNvdW5kc1tzb3VuZF0ucGxheWluZysrO1xyXG4gICAgICAgICAgICBzbmQub24oXCJlbmRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VuZHNbc291bmRdLnBsYXlpbmctLTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNuZC5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnbG9iYWxWb2x1bWUodm9sdW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBIb3dsZXIudm9sdW1lKHZvbHVtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3AoKTogdm9pZCB7XHJcbiAgICAgICAgSG93bGVyLnVubG9hZCgpO1xyXG4gICAgICAgIFV0aWwuZWFjaEluKHRoaXMuc291bmRzLCAoc291bmQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zb3VuZHNbc291bmRdLmhvd2wgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuc291bmRzW3NvdW5kXS5sb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRGaWxlKHNvdW5kOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBsZXQgb3B0czogSVNvdW5kU3RhdGUgPSBVdGlsLmV4dGVuZCh7IH0sIHRoaXMuZGVmYXVsdE9wdGlvbnMsIHRoaXMuc291bmRzW3NvdW5kXSk7XHJcbiAgICAgICAgRGVidWcubG9nKERlYnVnTGV2ZWwuRGVidWcsIFwiTG9hZGluZyBzb3VuZDogXCIgKyBzb3VuZCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBmaWxlID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICAgICAgb25sb2FkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VuZHNbc291bmRdLmhvd2wgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zb3VuZHNbc291bmRdLmxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdW5kc1tzb3VuZF0ubG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzQ2FsbGJhY2sodGhpcy5sb2FkZWRDb3VudCwgdGhpcy5zb3VuZENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBEZWJ1Zy5sb2coRGVidWdMZXZlbC5EZWJ1ZywgXCJTb3VuZCBsb2FkZWQ6IFwiICsgc291bmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzcmM6IG9wdHMuZmlsZXMsXHJcbiAgICAgICAgICAgICAgICB2b2x1bWU6IG9wdHMudm9sdW1lLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIgLy8gdHNsaW50OmRpc2FibGU6bm8tY29uc29sZVxyXG5pbXBvcnQgeyBQcmVsb2FkZXIgfSBmcm9tIFwiLi9tb2R1bGVzL3ByZWxvYWRlclwiO1xyXG5pbXBvcnQgeyBJU291bmRPcHRpb25zLCBTb3VuZEVuZ2luZSB9IGZyb20gXCIuL21vZHVsZXMvc291bmRlbmdpbmVcIjtcclxuXHJcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zdHJpbmctbGl0ZXJhbFxyXG53aW5kb3dbXCJwcmVsb2FkVGVzdFwiXSA9ICgpID0+IHtcclxuICAgIGxldCBpbWFnZVByb2dyZXNzID0gMDtcclxuICAgIGxldCBzb3VuZFByb2dyZXNzID0gMDtcclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVUb3RhbFByb2dyZXNzKCkge1xyXG4gICAgICAgIGxldCBwcm9ncmVzcyA9IHNvdW5kUHJvZ3Jlc3MgKiAwLjUgKyBpbWFnZVByb2dyZXNzICogMC41O1xyXG4gICAgICAgICQoXCIjdG90YWxwcm9ncmVzc1wiKS53aWR0aChwcm9ncmVzcyArIFwiJVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcDogUHJlbG9hZGVyID0gbmV3IFByZWxvYWRlcigobG9hZGVkLCBpbWFnZUNvdW50KSA9PiB7XHJcbiAgICAgICAgbGV0IHByb2dyZXNzID0gMTAwICogKGxvYWRlZCAvIGltYWdlQ291bnQpO1xyXG4gICAgICAgICQoXCIjaW1hZ2Vwcm9ncmVzc1wiKS53aWR0aChwcm9ncmVzcyArIFwiJVwiKTtcclxuICAgICAgICBpbWFnZVByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcbiAgICAgICAgdXBkYXRlVG90YWxQcm9ncmVzcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcC5yZWdpc3RlckltYWdlKFwibWVkaWEvaW1hZ2VzL3BpdGNoZXMvYmFzaWNcIiwgXCJibGl6emFyZC5wbmdcIik7XHJcbiAgICBwLnJlZ2lzdGVySW1hZ2UoXCJtZWRpYS9pbWFnZXMvcGl0Y2hlcy9iYXNpY1wiLCBcImhlYXQucG5nXCIpO1xyXG4gICAgcC5yZWdpc3RlckltYWdlKFwibWVkaWEvaW1hZ2VzL3BpdGNoZXMvYmFzaWNcIiwgXCJuaWNlLnBuZ1wiKTtcclxuICAgIHAucmVnaXN0ZXJJbWFnZShcIm1lZGlhL2ltYWdlcy9waXRjaGVzL2Jhc2ljXCIsIFwicmFpbi5wbmdcIik7XHJcbiAgICBwLnJlZ2lzdGVySW1hZ2UoXCJtZWRpYS9pbWFnZXMvcGl0Y2hlcy9iYXNpY1wiLCBcInN1bm55LnBuZ1wiKTtcclxuXHJcbiAgICAkKFwiI3ByZWxvYWRJbWFnZXNTZXJpYWxcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgcC5wcmVsb2FkKGZhbHNlKVxyXG4gICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkltYWdlcyBsb2FkZWRcIik7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNwcmVsb2FkSW1hZ2VzUGFyYWxsZWxcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgIHAucHJlbG9hZCh0cnVlKVxyXG4gICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkltYWdlcyBsb2FkZWRcIik7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNwcmVsb2FkQWxsU2VyaWFsXCIpLm9uKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IHAucHJlbG9hZChmYWxzZSk7XHJcbiAgICAgICAgYXdhaXQgc2UucHJlbG9hZChmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI3ByZWxvYWRBbGxQYXJhbGxlbFwiKS5vbihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBwLnByZWxvYWQodHJ1ZSk7XHJcbiAgICAgICAgc2UucHJlbG9hZCh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBzb3VuZHM6IHsgW3Byb3BOYW1lOiBzdHJpbmddOiBJU291bmRPcHRpb25zIH0gPSB7XHJcbiAgICAgICAgQWFhaDogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIEJvb2luZzogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIENoZWVyaW5nOiB7IHZvbHVtZTogMC4xIH0sXHJcbiAgICAgICAgQ2xhcEJvbzogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIENsYXBwaW5nOiB7IHZvbHVtZTogMC4xIH0sXHJcbiAgICAgICAgQ3JpY2tldHM6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgICAgICBHaWdnbGluZzogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIEh5c3RlcmljYWw6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgICAgICBMYXVnaHRlcjogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIE9vb2g6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgICAgICBTaG9ja2VkOiB7IHZvbHVtZTogMC4xIH0sXHJcbiAgICAgICAgU3RvbXBpbmc6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgIH07XHJcblxyXG4gICAgbGV0IHNlID0gbmV3IFNvdW5kRW5naW5lKChsb2FkZWQsIHNvdW5kQ291bnQpID0+IHtcclxuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSAxMDAgKiAobG9hZGVkIC8gc291bmRDb3VudCk7XHJcbiAgICAgICAgJChcIiNzb3VuZHByb2dyZXNzXCIpLndpZHRoKHByb2dyZXNzICsgXCIlXCIpO1xyXG4gICAgICAgIHNvdW5kUHJvZ3Jlc3MgPSBwcm9ncmVzcztcclxuICAgICAgICB1cGRhdGVUb3RhbFByb2dyZXNzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkLmVhY2goc291bmRzLCAoc291bmQsIG9wdGlvbnMpID0+IHtcclxuICAgICAgICBzZS5yZWdpc3RlclNvdW5kKFwibWVkaWEvc291bmRzXCIsIHNvdW5kLCBvcHRpb25zKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIuc291bmRidXR0b25cIikuY2xpY2soKGV2dCkgPT4ge1xyXG4gICAgICAgIHNlLnBsYXkoJChldnQudGFyZ2V0KS5hdHRyKFwiZmlsZVwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI2dsb2JhbHZvbHVtZVwiKS5vbihcImNoYW5nZVwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICBzZS5nbG9iYWxWb2x1bWUoJChldnQudGFyZ2V0KS52YWwoKSAvIDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI3N0b3BidXR0b25cIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgc2Uuc3RvcCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNwcmVsb2FkU291bmRzU2VyaWFsXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHNlLnByZWxvYWQoZmFsc2UpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNvdW5kcyBsb2FkZWQuXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNwcmVsb2FkU291bmRzUGFyYWxsZWxcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgc2UucHJlbG9hZCh0cnVlKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTb3VuZHMgbG9hZGVkLlwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG4iLCIgLy8gdHNsaW50OmRpc2FibGU6bm8tY29uc29sZVxyXG5pbXBvcnQgeyBJU291bmRPcHRpb25zLCBTb3VuZEVuZ2luZSB9IGZyb20gXCIuL21vZHVsZXMvc291bmRlbmdpbmVcIjtcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXN0cmluZy1saXRlcmFsXHJcbndpbmRvd1tcInNvdW5kVGVzdFwiXSA9IChwcm9ncmVzc0NhbGxiYWNrPzogKGxvYWRlZDogbnVtYmVyLCBzb3VuZENvdW50OiBudW1iZXIpID0+IHZvaWQpID0+IHtcclxuICAgIGxldCBzb3VuZHM6IHsgW3Byb3BOYW1lOiBzdHJpbmddOiBJU291bmRPcHRpb25zIH0gPSB7XHJcbiAgICAgICAgQWFhaDogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIEJvb2luZzogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIENoZWVyaW5nOiB7IHZvbHVtZTogMC4xIH0sXHJcbiAgICAgICAgQ2xhcEJvbzogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIENsYXBwaW5nOiB7IHZvbHVtZTogMC4xIH0sXHJcbiAgICAgICAgQ3JpY2tldHM6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgICAgICBHaWdnbGluZzogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIEh5c3RlcmljYWw6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgICAgICBMYXVnaHRlcjogeyB2b2x1bWU6IDAuMSB9LFxyXG4gICAgICAgIE9vb2g6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgICAgICBTaG9ja2VkOiB7IHZvbHVtZTogMC4xIH0sXHJcbiAgICAgICAgU3RvbXBpbmc6IHsgdm9sdW1lOiAwLjEgfSxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKCFwcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayA9IChsb2FkZWQsIHNvdW5kQ291bnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHByb2dyZXNzID0gMTAwICogKGxvYWRlZCAvIHNvdW5kQ291bnQpO1xyXG4gICAgICAgICAgICAkKFwiI3NvdW5kcHJvZ3Jlc3NcIikud2lkdGgocHJvZ3Jlc3MgKyBcIiVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZSA9IG5ldyBTb3VuZEVuZ2luZShwcm9ncmVzc0NhbGxiYWNrKTtcclxuXHJcbiAgICAkLmVhY2goc291bmRzLCAoc291bmQsIG9wdGlvbnMpID0+IHtcclxuICAgICAgICBzZS5yZWdpc3RlclNvdW5kKFwibWVkaWEvc291bmRzXCIsIHNvdW5kLCBvcHRpb25zKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIuc291bmRidXR0b25cIikuY2xpY2soKGV2dCkgPT4ge1xyXG4gICAgICAgIHNlLnBsYXkoJChldnQudGFyZ2V0KS5hdHRyKFwiZmlsZVwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI2dsb2JhbHZvbHVtZVwiKS5vbihcImNoYW5nZVwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICBzZS5nbG9iYWxWb2x1bWUoJChldnQudGFyZ2V0KS52YWwoKSAvIDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI3N0b3BidXR0b25cIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgc2Uuc3RvcCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNwcmVsb2FkU291bmRzU2VyaWFsXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHNlLnByZWxvYWQoZmFsc2UpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNvdW5kcyBsb2FkZWQuXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNwcmVsb2FkU291bmRzUGFyYWxsZWxcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgc2UucHJlbG9hZCh0cnVlKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTb3VuZHMgbG9hZGVkLlwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbiIsIi8vIHRzbGludDpkaXNhYmxlOm5vLWNvbnNvbGVcclxuZXhwb3J0IGVudW0gRGVidWdMZXZlbCB7XHJcbiAgICBEZWJ1ZyA9IDEsXHJcbiAgICBJbmZvID0gMixcclxuICAgIFdhcm4gPSAzLFxyXG4gICAgRXJyb3IgPSA0LFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGVidWcge1xyXG4gICAgcHVibGljIHN0YXRpYyBsb2cobGV2ZWw6IERlYnVnTGV2ZWwsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKERlYnVnTGV2ZWxbbGV2ZWxdICsgXCI6IFwiICsgbWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFV0aWwge1xyXG4gICAgcHVibGljIHN0YXRpYyBleHRlbmQoLi4uYXJncykge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gYXJnc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3NbaV0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbMF1ba2V5XSA9IGFyZ3NbaV1ba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJnc1swXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGVhY2hPZjxUPihsaXN0OiBUW10sIGZ1bmM6IChUKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBsaXN0KSB7XHJcbiAgICAgICAgICAgIGZ1bmMoaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZWFjaEluPFQ+KGxpc3Q6IHt9LCBmdW5jOiAoVCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gaW4gbGlzdCkge1xyXG4gICAgICAgICAgICBpZiAobGlzdC5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgZnVuYyhpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuIl19